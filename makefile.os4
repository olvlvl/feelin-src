#
# makefile header to compile Feelin classes
#

# HOMBRE : I tried to implement precompiled headers, but it doesn't work yet.
# Anyway, this makefile is usable as is !

SOURCE := /Feelin/Sources/
DEMOS  := /Feelin/Demos
TARGET := /Feelin/LIBS/Feelin/
EXTENSION := .fc

# Default action
export ACTION := all

usage :
	@ echo "Available targets are :"
	@ echo "all .................. build everything, excluding OS4 precompiled headers"
	@ echo "clean ................ clean everything, excluding OS4 precompiled headers"
	@ echo "feelin.library ....... build feelin.library only"
	@ echo "classes .............. build classes only"
	@ echo "! OS4HeaderList ...... generate OS4 header list required for the next target ;"
	@ echo "                       to be used if Feelin:sources/_stemplate/OS4includeFile.h"
	@ echo "                       is not provided or on SDK update ; will need manual cleanup then"
	@ echo "! allOS4Headers ...... build OS4 header files thanks to the file generated by OS4HeaderList"
	@ echo "! cleanOS4Headers .... clean OS4 precompiled headers files"
	@ echo "! allFeelinHeaders ... build Feelin header files of the include dir, so they are precompiled"
	@ echo "! cleanFeelinHeaders . clean Feelin precompiled header files"
	@ echo ""
	@ echo "! Not working yet..."

all :   ACTION := all
all :   feelin.library classes demos
clean : ACTION := clean
clean :  classes demos feelin.library

.POLY : all clean

feelin.library :
	make --no-print-directory --directory=$(SOURCE)feelin --file=makefile.os4.gcc $(ACTION)


classes : \
	Application$(EXTENSION) \
	AppServer$(EXTENSION) \
	Area$(EXTENSION) \
	Balance$(EXTENSION) \
	Bar$(EXTENSION) \
	BitMap$(EXTENSION) \
	CorePNG$(EXTENSION) \
	CSSDocument$(EXTENSION) \
	Decorator$(EXTENSION) \
	Decorator-Flatty$(EXTENSION) \
	Dialog$(EXTENSION) \
	Display$(EXTENSION) \
	Document$(EXTENSION) \
	DOSNotify$(EXTENSION) \
	Element$(EXTENSION) \
	Family$(EXTENSION) \
	Frame$(EXTENSION) \
	Gauge$(EXTENSION) \
	Group$(EXTENSION) \
	HTMLDocument$(EXTENSION) \
	Image$(EXTENSION) \
	ImageDisplay$(EXTENSION) \
	Item$(EXTENSION) \
	List$(EXTENSION) \
	Listview$(EXTENSION) \
	ModulesList$(EXTENSION) \
	Numeric$(EXTENSION) \
	Page$(EXTENSION) \
	PDRDocument$(EXTENSION) \
	Picture$(EXTENSION) \
	Preference$(EXTENSION) \
	Prop$(EXTENSION) \
	Radio$(EXTENSION) \
	Render$(EXTENSION) \
	Scale$(EXTENSION) \
	Scrollbar$(EXTENSION) \
	Slider$(EXTENSION) \
	String$(EXTENSION) \
	Text$(EXTENSION) \
	TextDisplay$(EXTENSION) \
	Thread$(EXTENSION) \
	Widget$(EXTENSION) \
	Window$(EXTENSION) \
	WinServer$(EXTENSION) \
	XMLApplication$(EXTENSION) \
	XMLDocument$(EXTENSION) \
	XMLObject$(EXTENSION)

%.fc : %
	echo " [2m$(TARGET)$<[0m >>"
	make --no-print-directory --directory=$(SOURCE)$< $(ACTION)

demos :
	@ make --no-print-directory --directory=$(DEMOS) --file=makefile.os4.gcc $(ACTION)

allOS4Headers :
	@ make --no-print-directory --directory=$(SOURCE)_template --file=foo.os4.gcc allOS4Headers
	@ move FROM Feelin:sources/_template/OS4includeFile.h.gch TO Feelin:include/OS4Includes.h.gch

cleanOS4Headers :
	@ delete Feelin:Include/#?.gch


allFeelinHeaders :
	@ make --no-print-directory --directory=$(SOURCE)_template --file=foo.os4.gcc compileFeelinHeaders

cleanFeelinHeaders :
	@ delete Feelin:Include/proto/#?.gch
	@ delete Feelin:Include/libraries/#?.gch

generateOS4HeaderList :
	@ list SDK:Include/Include_h/proto/#?.h LFORMAT "#include <proto/%n>" >OS4includeFile.h

